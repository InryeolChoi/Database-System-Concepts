# B+ νΈλ¦¬ μΈλ±μ¤ νμΌ

μ°λ¦¬κ°€ [μΈλ±μ‹± (1) - μμ„ μΈλ±μ¤](chapter14_1.md)μ—μ„ λ‹¤λ£¬ μμ„ μΈλ±μ¤λ” ν•κ³„λ¥Ό κ°€μ§€κ³  μλ‹¤.

1. νμΌμ΄ μ»¤μ§μλ΅ μΈλ±μ¤λ¥Ό μ΅°νν•λ” μ„±λ¥μ΄ λ–¨μ–΄μ§„λ‹¤. 
2. νμΌμ΄ μ»¤μ§μλ΅ λ°μ΄ν„°λ¥Ό μμ°¨ νƒμƒ‰ν•λ” μ„±λ¥μ΄ λ–¨μ–΄μ§„λ‹¤.

νμΌμ„ μ¬κµ¬μ„±ν•λ©΄ μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μμΌλ‚, μ΄λ¥Ό μμ£Ό μν–‰ν•λ” κ²ƒμ€ λ°”λμ§ν•μ§€ μ•μ

κ·Έλμ„ λ‚μ¨ λ€μ• μ¤‘ ν•λ‚κ°€ λ°”λ΅, B+ νΈλ¦¬ κµ¬μ΅°μ„.
B+ νΈλ¦¬λ” λ‹¤μκ³Ό κ°™μ€ νΈλ¦¬μ νΉμ§•μ„ κ°€μ§€κ³  μμ:

- κ· ν• νΈλ¦¬ κµ¬μ΅°(balanced tree) μ„.
- rootμ—μ„ leafκΉμ§€μ κ²½λ΅ κΈΈμ΄κ°€ λ¨λ‘ λ™μΌν•¨ β†’ κ· ν• νΈλ¦¬ μ΅°κ±΄ λ§μ΅±.
- λ£¨νΈ λ…Έλ“λ¥Ό μ μ™Έν• λ¨λ“  λΉ„λ‹¨λ§ λ…Έλ“(non-leaf node) λ” μμ‹ λ…Έλ“λ¥Ό $βn/2β‰$κ° μ΄μƒ, $n$κ° μ΄ν• κ°€μ§. μ—¬κΈ°μ„ $n$μ€ νΈλ¦¬μ μ°¨μλ΅ κ³ μ •λ κ°’μ„.
- λ£¨νΈ λ…Έλ“λ” μµμ† 2κ°μ—μ„ μµλ€ $n$κ°κΉμ§€ μμ‹μ„ κ°€μ§ μ μμ.

## **B+ νΈλ¦¬μ κµ¬μ΅°**

**π“ B+-νΈλ¦¬λ” λ‹¤λ‹¨κ³„ μΈλ±μ¤ κµ¬μ΅°μ„**

- B+-νΈλ¦¬λ” λ‹¤λ‹¨κ³„ μΈλ±μ¤(multilevel index) κµ¬μ΅°λ¥Ό κ°€μ§€λ©°, κΈ°μ΅΄μ μΈλ±μ¤-μμ°¨ νμΌ κµ¬μ΅°μ™€λ” λ‹¤λ¦„.
- **μ „μ **: μΌλ‹¨ λ¨λ“  κ²€μƒ‰ ν‚¤(search key)λ” **κ³ μ (unique)** ν•λ‹¤κ³  κ°€μ •ν•¨ (μ¦‰, ν•λ‚μ λ μ½”λ“μ—λ§ μ΅΄μ¬).
- **μ¤‘λ³µ ν‚¤μ— λ€ν• μ²λ¦¬**λ” λ’¤μ—μ„ λ‹¤λ£Έ.

**μμ‹ : μ „μ²΄ κ·Έλ¦Ό**
![](./Images/chapter14_2_1.png)

μΈλ±μ¤μ λ¨μ–‘μ„ μ „μ²΄μ μΌλ΅ ν•λ² λ³΄μ. μ™ μ΄κ²ƒμ΄ B+ νΈλ¦¬λΌκ³  ν•λ”μ§€ μ• μ μλ‹¤.

- μ΄ μ¤‘μ—μ„ μ°μ„  κΈ°λ³Έμ μΈ λ…Έλ“μ κµ¬μ΅°λ¥Ό μ‚΄ν΄λ³΄μ.
- κ·Έλ¦¬κ³ , μ μΌ μ•„λμ½μ— μλ” λ¦¬ν”„ λ…Έλ“μ νΉμ§•μ„ μ•μ•„λ³΄μ.
- λ§μ§€λ§‰μΌλ΅, λ‚΄λ¶€ λ…Έλ“(λΉ„λ‹¨λ§ λ…Έλ“)λ¥Ό μ•μ•„λ³΄λ©΄ λλ‹¤.

### **π”— λ…Έλ“ : κΈ°λ³Έ κµ¬μ΅°**
![](./Images/chapter14_2_2.png)
κ·Έλ¦Ό 14.7μ€ κΈ°λ³Έμ μΈ B+ νΈλ¦¬μ λ…Έλ“ (node)
λ…Έλ“λ” ν¬μΈν„°μ™€ κ²€μƒ‰ ν‚¤ κ°’μΌλ΅ μ΄λ¤„μ Έ μλ‹¤.

- κ²€μƒ‰ ν‚¤ κ°’ : κ²€μƒ‰ μ‹, μ–΄λ–¤ κ°’μ„ κΈ°μ¤€μΌλ΅ λ°μ΄ν„°λ¥Ό μ°Ύμ„μ§€ μ•λ ¤μ£Όλ” **κΈ°μ¤€μ  μ—­ν• **
- ν¬μΈν„° : Cμ–Έμ–΄μ ν¬μΈν„°λ¥Ό μƒκ°ν•λ©΄ λ¨. μμ‹ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚¤κ±°λ‚, μ‹¤μ  λ°μ΄ν„° λ μ½”λ“λ¥Ό κ°€λ¦¬ν‚΄.

1κ°μ λ…Έλ“λ‹Ή ν¬μΈν„°μ κ°―μμ™€ κ²€μƒ‰ ν‚¤ κ°’μ κ°―μλ” μ •ν•΄μ Έ μμ. 

- **κ²€μƒ‰ ν‚¤ κ°’**$(K_1, K_2, \cdots, K_{n-1})$ μ€ n-1κ°.
- **ν¬μΈν„°**$(P_1, P_2, \cdots, P_n)$ λ” nκ°.

**λν• κ²€μƒ‰ ν‚¤ κ°’μ€** ν•­μƒ **μ¤λ¦„μ°¨μμΌλ΅ μ •λ ¬**λμ–΄ μμ ($K_{i} < K_{i+1}$)

π”—Β λ¦¬ν”„ λ…Έλ“
![](./Images/chapter14_2_3.png)

λ¦¬ν”„λ…Έλ“μ—μ„μ ν¬μΈν„°

- 1λ²μ§Έ ~ n-1λ²μ§Έ ν¬μΈν„° : μ‹¤μ  λ μ½”λ“λ¥Ό κ°€λ¦¬ν‚΄
- λ§μ§€λ§‰ ν¬μΈν„° : λ‹¤μ λ¦¬ν”„ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚΄.
- μ΄λ¥Ό ν†µν•΄ λ¦¬ν”„ λ…Έλ“λ¥Ό ν‚¤ μμ„λ€λ΅ μμ°¨μ μΌλ΅ μνν•λ” κ²ƒμ΄ κ°€λ¥ν•¨ β†’ μμ°¨ μ²λ¦¬μ— ν¨μ¨μ μ„.

ν•λ‚μ λ¦¬ν”„λ…Έλ“μ—μ„ ν¬μΈν„°κ°€ nκ° μλ‹¤κ³  ν•  λ•,

- μµμ† β(nβ’1)/2β‰κ°μ ν‚¤κ°€ ν•„μ”ν•κ³ , μµλ€ nβ’1κ°μ ν‚¤λ¥Ό κ°€μ§ μ μμ.
- ex) n = 4μ΄λ©΄ μµμ† 2κ°, μµλ€ 3κ°μ ν‚¤ λ³΄μ  κ°€λ¥.

λ¦¬ν”„ λ…Έλ“ κ°„μ—λ„ **μ •λ ¬ κ΄€κ³„ μ μ§€λ¨**:

- $L_i$κ°€ $L_j$λ³΄λ‹¤ μ™Όμ½μ— μλ‹¤λ©΄, $L_i$μ λ¨λ“  ν‚¤ $v_i$ < $v_j$ (for all $v_j$ in $L_j$)

### λ‚΄λ¶€ λ…Έλ“

- λ‚΄λ¶€ λ…Έλ“λ” **λ¦¬ν”„ λ…Έλ“λ“¤μ„ μ„ν• λ‹¤λ‹¨κ³„ μΈλ±μ¤ μ—­ν• **μ„ ν•¨.
- ν¬μΈν„°λ” λ¨λ‘ **λ‹¤λ¥Έ νΈλ¦¬ λ…Έλ“(λ¦¬ν”„ or λ‚΄λ¶€)λ¥Ό κ°€λ¦¬ν‚΄**.
- μµλ€ nκ°μ ν¬μΈν„°λ¥Ό κ°€μ§ μ μμΌλ©°, μµμ† βn/2β‰κ°μ ν¬μΈν„°λ¥Ό κ°€μ Έμ•Ό ν•¨
    - μ΄λ• ν¬μΈν„° κ°μ mμ€ **fanout(λ¶„κΈ°λ„)** λΌκ³  ν•¨.
- λ‚΄λ¶€ λ…Έλ“μ— mκ°μ ν¬μΈν„°κ°€ μμ„ λ•
    - $P_1$μ€ ν‚¤ κ°’ < K_1μΈ μ„λΈ νΈλ¦¬λ¥Ό κ°€μ§.
    - $P_2 \sim P_{mβ’1}$λ” $K_{i-1} \sim K_{i}$ λ²”μ„μ μ„λΈνΈλ¦¬
    - $P_m$μ€ $K_{m-1}$ λ³΄λ‹¤ ν° ν‚¤κ°€ μλ” μ„λΈνΈλ¦¬

λ‚΄λ¶€ λ…Έλ“ μ¤‘ κ°€μ¥ μ„μ— μ„μΉν• **λ£¨νΈ λ…Έλ“**λ” λ‹¤μκ³Ό κ°™μ€ νΉμ§•μ΄ μμ.

- **βn/2β‰ λ―Έλ§μ ν¬μΈν„°λ„ κ°€μ§ μ μμ**.
- λ‹¨, νΈλ¦¬κ°€ ν•λ‚μ λ…Έλ“λ§μΌλ΅ κµ¬μ„±λμ§€ μ•λ” μ΄μƒ **μµμ† 2κ°μ ν¬μΈν„°λ” ν•„μ**μ„.


### **π§± μμ‹ : B+ νΈλ¦¬ κµ¬μ΅°**

**λ‹¤μ–‘ν• μ°¨μμ B+-νΈλ¦¬**

- n = 4μΈ κ²½μ° β†’ νΈλ¦¬ λ†’μ΄κ°€ λ” λ†’μ.
- n = 6μΈ κ²½μ° β†’ κ°™μ€ λ°μ΄ν„°λ¥Ό ν‘ν„ν•΄λ„ νΈλ¦¬ λ†’μ΄κ°€ λ‚®μ•„μ§.
- λ¨λ“  μμ‹λ” **κ· ν• νΈλ¦¬** κµ¬μ΅°μ„ β†’ λ£¨νΈμ—μ„ λ¦¬ν”„κΉμ§€ κ²½λ΅ κΈΈμ΄κ°€ λ™μΌν•¨.
- B+-νΈλ¦¬μ Bλ” Balanced(κ· ν•)λ¥Ό μλ―Έν•¨.