# B+ νΈλ¦¬ μΈλ±μ¤ νμΌ

μ°λ¦¬κ°€ [μΈλ±μ‹± (1) - μμ„ μΈλ±μ¤](chapter14_1.md)μ—μ„ λ‹¤λ£¬ μμ„ μΈλ±μ¤λ” ν•κ³„λ¥Ό κ°€μ§€κ³  μλ‹¤.

1. νμΌμ΄ μ»¤μ§μλ΅ μΈλ±μ¤λ¥Ό μ΅°νν•λ” μ„±λ¥μ΄ λ–¨μ–΄μ§„λ‹¤. 
2. νμΌμ΄ μ»¤μ§μλ΅ λ°μ΄ν„°λ¥Ό μμ°¨ νƒμƒ‰ν•λ” μ„±λ¥μ΄ λ–¨μ–΄μ§„λ‹¤.

νμΌμ„ μ¬κµ¬μ„±ν•λ©΄ μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μμΌλ‚, μ΄λ¥Ό μμ£Ό μν–‰ν•λ” κ²ƒμ€ λ°”λμ§ν•μ§€ μ•μ

κ·Έλμ„ λ‚μ¨ λ€μ• μ¤‘ ν•λ‚κ°€ λ°”λ΅, B+ νΈλ¦¬ κµ¬μ΅°μ„.

B+ νΈλ¦¬λ” λ‹¤μκ³Ό κ°™μ€ νΈλ¦¬μ νΉμ§•μ„ κ°€μ§€κ³  μμ:

- κ· ν• νΈλ¦¬ κµ¬μ΅°(balanced tree) μ„.
- rootμ—μ„ leafκΉμ§€μ κ²½λ΅ κΈΈμ΄κ°€ λ¨λ‘ λ™μΌν•¨ β†’ κ· ν• νΈλ¦¬ μ΅°κ±΄ λ§μ΅±.
- λ£¨νΈ λ…Έλ“λ¥Ό μ μ™Έν• λ¨λ“  λΉ„λ‹¨λ§ λ…Έλ“(non-leaf node) λ” μμ‹ λ…Έλ“λ¥Ό $βn/2β‰$κ° μ΄μƒ, $n$κ° μ΄ν• κ°€μ§. μ—¬κΈ°μ„ $n$μ€ νΈλ¦¬μ μ°¨μλ΅ κ³ μ •λ κ°’μ„.
- λ£¨νΈ λ…Έλ“λ” μµμ† 2κ°μ—μ„ μµλ€ $n$κ°κΉμ§€ μμ‹μ„ κ°€μ§ μ μμ.

## **B+ νΈλ¦¬**

**π“ B+-νΈλ¦¬λ” λ‹¤λ‹¨κ³„ μΈλ±μ¤ κµ¬μ΅°μ„**

- B+-νΈλ¦¬λ” λ‹¤λ‹¨κ³„ μΈλ±μ¤(multilevel index) κµ¬μ΅°λ¥Ό κ°€μ§€λ©°, κΈ°μ΅΄μ μΈλ±μ¤-μμ°¨ νμΌ κµ¬μ΅°μ™€λ” λ‹¤λ¦„.
- **μ „μ **: μΌλ‹¨ λ¨λ“  κ²€μƒ‰ ν‚¤(search key)λ” **κ³ μ (unique)** ν•λ‹¤κ³  κ°€μ •ν•¨ (μ¦‰, ν•λ‚μ λ μ½”λ“μ—λ§ μ΅΄μ¬).
- **μ¤‘λ³µ ν‚¤μ— λ€ν• μ²λ¦¬**λ” λ’¤μ—μ„ λ‹¤λ£Έ.

**π”— λ…Έλ“μ κµ¬μ΅°**

**π“¦ μΌλ° λ…Έλ“ κµ¬μ΅°**

- ν•λ‚μ λ…Έλ“λ” μµλ€ nβ’1κ°μ **μ •λ ¬λ κ²€μƒ‰ ν‚¤ κ°’**$(K_1, K_2, \cdots, K_{n-1})$ κ³Ό nκ°μ **ν¬μΈν„°**$(P_1, P_2, \cdots, P_n)$ λ¥Ό κ°€μ§.
- ν‚¤λ” ν•­μƒ **μ¤λ¦„μ°¨μμΌλ΅ μ •λ ¬**λμ–΄ μμ $(K_1 < K_2 < \cdots < K_{n-1})$.

**πƒ λ¦¬ν”„ λ…Έλ“ κµ¬μ΅° (Leaf Nodes)**

- ν¬μΈν„° $P_i$λ” ν•΄λ‹Ή ν‚¤ $K_i$κ°€ μλ” **μ‹¤μ  λ μ½”λ“λ¥Ό κ°€λ¦¬ν‚΄**.
- λ§μ§€λ§‰ ν¬μΈν„° $P_n$μ€ **νΉμν• μ©λ„**λ΅ μ‚¬μ©λ¨ β†’ μ•„λμ—μ„ μ„¤λ…ν•¨.
- ν•λ‚μ λ¦¬ν”„ λ…Έλ“λ” μµλ€ $nβ’1$κ°μ ν‚¤λ¥Ό κ°€μ§ μ μκ³ , μµμ† $β(nβ’1)/2β‰$κ°μ ν‚¤λ¥Ό κ°€μ Έμ•Ό ν•¨.
    - μ: $n = 4$μ΄λ©΄ μµμ† $2$κ°, μµλ€ $3$κ°μ ν‚¤ λ³΄μ  κ°€λ¥.
- λ¦¬ν”„ λ…Έλ“ κ°„μ—λ„ **μ •λ ¬ κ΄€κ³„ μ μ§€λ¨**:
    - $L_i$κ°€ $L_j$λ³΄λ‹¤ μ™Όμ½μ— μλ‹¤λ©΄, $L_i$μ λ¨λ“  ν‚¤ $v_i < v_j$ (for all $v_j$ in $L_j$)

**π”— λ¦¬ν”„ λ…Έλ“ μ—°κ²°**

- $P_n$ **ν¬μΈν„°**λ” λ‹¤μ λ¦¬ν”„ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚¤λ” **μ—°κ²° ν¬μΈν„° μ—­ν• **μ„ ν•¨.
- μ΄ λ•λ¶„μ— **λ¦¬ν”„ λ…Έλ“λ¥Ό ν‚¤ μμ„λ€λ΅ μμ°¨μ μΌλ΅ μνν•λ” κ²ƒμ΄ κ°€λ¥**ν•¨ β†’ **μμ°¨ μ²λ¦¬μ— ν¨μ¨μ μ„**.

**π§© λ‚΄λ¶€ λ…Έλ“ κµ¬μ΅° (Internal Nodes)**

- λ‚΄λ¶€ λ…Έλ“λ” **λ¦¬ν”„ λ…Έλ“λ“¤μ„ μ„ν• λ‹¤λ‹¨κ³„ μΈλ±μ¤ μ—­ν• **μ„ ν•¨.
- ν¬μΈν„°λ” λ¨λ‘ **λ‹¤λ¥Έ νΈλ¦¬ λ…Έλ“(λ¦¬ν”„ or λ‚΄λ¶€)λ¥Ό κ°€λ¦¬ν‚΄**.
- μµλ€ $n$κ°μ ν¬μΈν„°λ¥Ό κ°€μ§ μ μμΌλ©°, μµμ† $βn/2β‰$κ°μ ν¬μΈν„°λ¥Ό κ°€μ Έμ•Ό ν•¨.
- μ΄λ• ν¬μΈν„° κ°μ $m$μ€ **fanout(λ¶„κΈ°λ„)** λΌκ³  ν•¨.
- λ‚΄λ¶€ λ…Έλ“μ— $m$κ°μ ν¬μΈν„°κ°€ μμ„ λ•:
    - $P_1$μ€ ν‚¤ κ°’ < Kβ‚μΈ μ„λΈνΈλ¦¬λ¥Ό κ°€λ¦¬ν‚΄
    - $P_i (2 β‰¤ i β‰¤ mβ’1)λ” K_{i-1} β‰¤ key < K_{i}$ λ²”μ„μ μ„λΈνΈλ¦¬
    - P_mμ€ β‰¥ Kβ‚β‚‹β‚μΈ ν‚¤κ°€ μλ” μ„λΈνΈλ¦¬

**π” λ£¨νΈ λ…Έλ“ μμ™Έ**

- λ£¨νΈλ” λ‚΄λ¶€ λ…Έλ“μ™€ λ‹¤λ¥΄κ² **βn/2β‰ λ―Έλ§μ ν¬μΈν„°λ„ κ°€μ§ μ μμ**.
- λ‹¨, νΈλ¦¬κ°€ ν•λ‚μ λ…Έλ“λ§μΌλ΅ κµ¬μ„±λμ§€ μ•λ” μ΄μƒ **μµμ† 2κ°μ ν¬μΈν„°λ” ν•„μ**μ„.

**π§± μμ‹: λ‹¤μ–‘ν• μ°¨μμ B+-νΈλ¦¬**

- n = 4μΈ κ²½μ° β†’ νΈλ¦¬ λ†’μ΄κ°€ λ” λ†’μ.
- n = 6μΈ κ²½μ° β†’ κ°™μ€ λ°μ΄ν„°λ¥Ό ν‘ν„ν•΄λ„ νΈλ¦¬ λ†’μ΄κ°€ λ‚®μ•„μ§.
- λ¨λ“  μμ‹λ” **κ· ν• νΈλ¦¬** κµ¬μ΅°μ„ β†’ λ£¨νΈμ—μ„ λ¦¬ν”„κΉμ§€ κ²½λ΅ κΈΈμ΄κ°€ λ™μΌν•¨.
- β€B+-νΈλ¦¬μ Bλ” Balanced(κ· ν•)λ¥Ό μλ―Έν•¨.β€

**π” μ¤‘λ³µ ν‚¤ μ²λ¦¬ (Duplicate Keys)**

- μ‹¤μ  DBμ—μ„λ” **κ²€μƒ‰ ν‚¤κ°€ μ¤‘λ³µλλ” κ²½μ°κ°€ λ§μ**.
- μ΄ κ²½μ° μ²λ¦¬ λ°©μ‹μ€ λ‹¤μκ³Ό κ°™μ:

**β‘  β λ‹¨μ λ³µμ  λ°©μ‹ (λΉ„μ¶”μ²)**

- **λ¦¬ν”„ λ…Έλ“μ— μ¤‘λ³µλ ν‚¤λ¥Ό λ¨λ‘ μ €μ¥ν•κ³  κ°κ° λ μ½”λ“ ν¬μΈν„°λ¥Ό κ°€μ§**.
- λ‚΄λ¶€ λ…Έλ“μ—λ„ μ¤‘λ³µ ν‚¤κ°€ λ“¤μ–΄κ° μ μμ–΄, **μ‚½μ…/μ‚­μ  μ—°μ‚° λ³µμ΅λ„ μ¦κ°€**ν•¨.

**β‘΅ β— λ²„ν‚· λ°©μ‹ (λ‹¨μ  μμ)**

- κ° ν‚¤μ— λ€ν•΄ **ν¬μΈν„°λ“¤μ μ§‘ν•©(λ²„ν‚·)μ„ μ €μ¥**ν•λ” λ°©μ‹.
- ν¬μΈν„° μκ°€ λ§μ•„μ§ κ²½μ° **λΉ„ν¨μ¨ λ°μƒ**.

**β‘Ά β… λ³µν•© ν‚¤ λ°©μ‹ (μ‹¤λ¬΄μ—μ„ κ°€μ¥ λ§μ΄ μ‚¬μ©λ¨)**

- **κ²€μƒ‰ ν‚¤ + κΈ°λ³Έ ν‚¤(primary key)** μ΅°ν•©μ„ μ΄μ©ν•μ—¬ **κ²€μƒ‰ ν‚¤λ¥Ό μ μΌν•κ² λ§λ“¦**.
- μμ‹: instructor ν…μ΄λΈ”μ—μ„ μ΄λ¦„(name)μ΄ μ¤‘λ³µλ  μ μλ‹¤λ©΄ β†’ (name, ID)λ¥Ό **λ³µν•© κ²€μƒ‰ ν‚¤**λ΅ μ‚¬μ©ν•¨.
- nameμΌλ΅λ§ κ²€μƒ‰ν•΄λ„ **(name, ID)** μΈλ±μ¤λ¥Ό ν†µν•΄ ν¨μ¨μ μΈ νƒμƒ‰μ΄ κ°€λ¥ν•¨.